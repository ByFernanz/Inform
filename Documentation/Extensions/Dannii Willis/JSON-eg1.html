<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Extension</title>
    <style type="text/css">
        <!--
        /* The default font (family) and size */

        body, p, td {
        	font-family: sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 0.8rem; /* 100/125 */
        }

        /* For fixed-point material within text, such as the typing on the Library Card index page */

        span.typewritten {
        	font-family: monospace;
        	font-size: 0.867rem; /* 13/12 * 100/125 */
        }

        /* For less important material: the small print */

        span.smaller {
        	font-size: 80%;
        }

        /* The "heading panel" is the coloured box, high up on the page. The colours
        vary depending on the page: for example, the style on a report of a translation
        with no problems is "headingpanelsucceeded", usually green, but if there were
        problems then "headingpanelfailed" is used, which is usually red. "headingpanel"
        itself is a more neutral grey by default. "headingpanelDark" is an alternative
        look to make the extensions index pages have some visual contrast with the others;
        by default they are a darker grey. */

        .headingpanel {
        	background: #eeeeee;
        }
        .headingpanelsucceeded {
        	background: #E6FFE6;
        }
        .headingpanelfailed {
        	background: #f69Ca6;
        }
        .headingpanelalt {
        	background: #808080;
        }

        /* Heading panels have two lines of text: an upper one in a larger size, and a
        lower one in a smaller. Again, the alt versions are meant to contrast.

        	Report on Translation: Succeeded                <-- headingpaneltext
        	Produced by Inform 10.1.0 (build 6U97)          <-- headingpanelrubric

        	Installed Extensions                            <-- headingpaneltextalt
        	Bundles of extra rules or phrases to...         <-- headingpanelrubricalt

        */

        span.headingpaneltext {
        	color: #222222;
        	font-family: sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 1.333rem; /* 20/12 * 100/125 */
        	font-weight: bold;
        }
        span.headingpaneltextalt {
        	color: #ffffff;
        	font-family: sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 1.333rem; /* 20/12 * 100/125 */
        	font-weight: bold;
        }

        span.headingpanelrubric {
        	color: #222222;
        	font-family: sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 0.733rem; /* 11/12 * 100/125 */
        	font-weight: bold;
        }
        span.headingpanelrubricalt {
        	color: #ffffff;
        	font-family: sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 0.733rem; /* 11/12 * 100/125 */
        	font-weight: bold;
        }

        /* Horizontal rule styling */

        div.hr {
        	border: 0;
        	width: 100%;
        	color: #707070;
        	background-color: #707070;
        	height: 5px;
        }

        /* This styles the (usually white) text of the example numbers written inside
        oval blobs in the extension documentation, which mimic the look of the in-app
        documentation. */

        .oval, .oval td {
        	background-image:url('inform:/doc_images/ovoid.png');
        	color:white;
        }

        /* Styling used in the extension documentation indexes: */

        /* Used for extension names in the extensions pane of the app */

        span.extensioncensusentry {
        	color: #ffffff;
        }

        span.extensionindexentry {
        	color: #404040;
        }

        span.extensionindexerror {
        	color: #ff8080;
        }

        /* This is used in extension documentation, where an example is presented
        in a slightly tinted box: */

        table.extensionexample {
        	background-color: #f0f0f0;
        }

        span.extensionexampleletter {
        	color: #202020;
        	font-size: 14px;
        	font-weight: bold;
        }

        /* Seen in problem messages: */

        span.problemred {
        	color: #800000;
        }

        span.problemgreen {
        	color: #008000;
        }

        span.phraseword {
        	color: #808080;
        }

        span.phrasetokentext {
        	color: #e00060;
        }

        span.phrasetokendesctext {
        	color: #4040ff;
        }

        span.phrasetokenvaluetext {
        	color: #ff4040;
        }

        /* Now we move on to styling used in the Index pages only: */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebarcolour {
        	background: #888;
        }
        div.periodictablesidebar:hover {
        	background: #222;
        }

        /* The text of the element-abbreviation, such as "Lx" or "Ph", uses: */

        span.elementtext {
        	color: #ffffff;
        	font-size: 1.333rem; /* 20/12 * 100/125 */
        	font-weight: bold;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        span.elementnumbertext {
        	color: #ffffff;
        	font-size: 0.622rem; /* 7/12 * 96/72 * 100/125 */
        }

        /* For the text of the element title, to the right of the element box: */

        span.elementtitletext {
        	color: #ffffff;
        	font-size: 0.6rem; /* 9/12 * 100/125 */
        	font-weight: bold;
        }

        /* The banner at the top of each element: */

        table.elementbanner {
        	background: #eeeeee;
        }

        /* For the typewriting on the Library Card: */

        span.librarycardtitle {
        	color: #803030;
        }

        span.librarycardother {
        	color: #303030;
        }

        /* Generically used for "more details" boxes in the index: */

        table.indexmorebox {
        	background-color: #e0e0e0;
            border-radius: 8px;
        }

        /* But not for activity contents: */

        table.indexactivitycontents {
        	background-color: #e8e0c0;
            border-radius: 8px;
        }

        /* For responses in index entries about rules: */

        span.indexresponseletter {
        	color: #ffffff;
        	font-family: 'Courier New', Courier, monospace;
        	background-color: #8080ff;
        }

        span.indexresponsetext {
        	color: #000066;
        }

        /* Used ubiquitously throughout the index and extension documentation: */

        span.indexblack {
        	color: #000000;
        }

        span.indexgrey {
        	color: #808080;
        }

        span.indexdarkgrey {
            color: #505050;
        }

        span.indexdullred {
        	color: #800000;
        }

        span.indexdullgreen {
        	color: #008000;
        }

        span.indexdullblue {
        	color: #000080;
        }

        /* Used for the room squares in the World map in the Index (which is currently
        a table with one row of one column) */

        table.indexmaproom {
        	border-color: #000000;
        }

        /* Used in the numbering of levels of the World map in the Index */

        span.indexmaplevelnumbers {
        	color: #c0c0c0;
        }

        /* Used e.g. for title rows in the Chart of basic kinds in the Index */

        tr.headingrow {
        	background-color: #e0e0e0;
        }

        /* Standard rows have black text on striped background colours, these being
        the usual ones seen in Mac OS X applications such as iTunes. */

        tr.stripeone {
        	background-color: #ffffff;
        }

        tr.stripetwo {
        	background-color: #f3f6fa;
        }

        tr.tintedrow {
        	background-color: #808080;
        }

        /* In the Figures index, this is the background colour used behind images
        (though in fact it will only be visible if the image fails to load, or uses
        transparency): */

        div.figureindexbox {
        	background-color: #6495ed;
        }

        /* To get the book-contents-page style leaders on the Contents element of
           the index to work, these must use the background colour of the body of
           the page, whatever that is: */

        ul.leaders li.leaded span:first-child {
        	background: white;
        }
        ul.leaders li.leaded span + span {
        	background: white;
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttontext {
        	font-size: 11px;
        	border-color: #000000;
        }

        span.registryminibuttontext {
        	font-size: 10px;
        	border-color: #000000;
        }

        span.registrybuttonuninstalled {
        	color: #000000;
        	background: #ffffdd;
        }

        span.registrybuttoninstalled {
        	color: #000000;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonbuiltin {
        	color: #888888;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonupdate {
        	color: #000000;
        	background: #aaddff;
        }

        span.registrybuttonrevert {
        	color: #000000;
        	background: #ddaaff;
        }

        span.registrybuttonrevealer {
        	color: #ffffff;
        	background: #444444;
        }

        /* Registry index section headings: */

        span.registrysectionname {
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        }
        span.registrysubsectionname {
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        }

        /* These are for the "mark" for a section, usually a section-symbol and number */

        span.registrysectionmark {
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        	color: #666;
        }
        span.registrysubsectionmark {
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        	color: #666;
        }

        /* Text of an item listed in a registry: */

        span.registryitemtext {
        	-webkit-font-smoothing: antialiased;
        	font-size: 12px;
        	line-height: 16px;
        }

        /* And how the links in a registry index page behave: */

        a.registrysilentlink {
        	text-decoration: none;
        	color: #000;
        }
        a.registrybuttonlink {
        	text-decoration: none;
        }
        a.registrycontentslink:link {
        	text-decoration: none;
        	color: #202020;
        }
        a.registrycontentslink:visited {
        	text-decoration: none;
        	color: #202020;
        }
        a.registrycontentslink:hover {
        	text-decoration: none;
        	color: #D00000;
        }
        a.registrycontentslink:active {
        	text-decoration: none;
        	color: #D00000;
        }

        -->
    </style>
    <style type="text/css">
        <!--
        /* (1) General layout material */

        *, *:before, *:after {
        	-moz-box-sizing: border-box;
        	-webkit-box-sizing: border-box;
        	box-sizing: border-box;
        }
        .headingpanellayout {
        	position: relative;
        	height: 56px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingpanellayoutdeeper {
        	position: relative;
        	height: 117px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingtext {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 10px 0px 10px;
        }
        .headingrubric {
        	position: absolute;
        	top: 36px;
        	width: 100%;
        	padding: 0px 10px 0px 10px;
        }
        h3.tighter {
        	margin-top: 0px;
        }
        p.hang {
        	padding-left: 25px;
        	text-indent: -25px;
        	margin-top: 0px;
        	margin-bottom: 0px;
        }
        p.in1 {
        	padding-left: 0px;
        }
        p.tightin1 {
        	padding-left: 0px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin1 {
        	padding-left: 0px;
        	margin-bottom: 2px;
        }
        p.hangingin1 {
        	padding-left: 50px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in2 {
        	padding-left: 25px;
        }
        p.tightin2 {
        	padding-left: 25px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin2 {
        	padding-left: 25px;
        	margin-bottom: 2px;
        }
        p.hangingin2 {
        	padding-left: 75px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in3 {
        	padding-left: 50px;
        }
        p.tightin3 {
        	padding-left: 50px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin3 {
        	padding-left: 50px;
        	margin-bottom: 2px;
        }
        p.hangingin3 {
        	padding-left: 100px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in4 {
        	padding-left: 75px;
        }
        p.tightin4 {
        	padding-left: 75px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin4 {
        	padding-left: 75px;
        	margin-bottom: 2px;
        }
        p.hangingin4 {
        	padding-left: 125px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in5 {
        	padding-left: 100px;
        }
        p.tightin5 {
        	padding-left: 100px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin5 {
        	padding-left: 100px;
        	margin-bottom: 2px;
        }
        p.hangingin5 {
        	padding-left: 150px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in6 {
        	padding-left: 125px;
        }
        p.tightin6 {
        	padding-left: 125px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin6 {
        	padding-left: 125px;
        	margin-bottom: 2px;
        }
        p.hangingin6 {
        	padding-left: 175px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in7 {
        	padding-left: 150px;
        }
        p.tightin7 {
        	padding-left: 150px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin7 {
        	padding-left: 150px;
        	margin-bottom: 2px;
        }
        p.hangingin7 {
        	padding-left: 200px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in8 {
        	padding-left: 175px;
        }
        p.tightin8 {
        	padding-left: 175px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin8 {
        	padding-left: 175px;
        	margin-bottom: 2px;
        }
        p.hangingin8 {
        	padding-left: 225px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in9 {
        	padding-left: 200px;
        }
        p.tightin9 {
        	padding-left: 200px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin9 {
        	padding-left: 200px;
        	margin-bottom: 2px;
        }
        p.hangingin9 {
        	padding-left: 250px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }

        /* (2) Index page layout material */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebar {
        	height: 56px;
        	width: 16px;
        }
        .periodictablesidebar a:link { text-decoration: none; }
        .periodictablesidebar a:visited { text-decoration: none; }
        .periodictablesidebar a:active { text-decoration: none; }

        /* The "element boxes" are the cells appearing in the periodic-table display
        on the welcome page of the index: */

        .elementbox {
        	position: relative;
        	height: 56px;
        	width: 56px;
        	padding: 0px;
        }

        .elementbox a:link { text-decoration: none; }
        .elementbox a:visited { text-decoration: none; }
        .elementbox a:active { text-decoration: none; }
        .elementbox a:hover { text-decoration: none; }
        .elementbox:hover {
        	opacity: 0.6;
        }

        /* The "small element boxes" look like those, but are smaller, and used on
        the headings of the content which those original boxes link to: */

        .smallelementbox {
        	position: relative;
        	height: 40px;
        	width: 40px;
        	padding: 0px;
        }

        .smallelementbox a:link { text-decoration: none; }
        .smallelementbox a:visited { text-decoration: none; }
        .smallelementbox a:active { text-decoration: none; }
        .smallelementbox a:hover { text-decoration: none; }
        .smallelementbox:hover {
        	opacity: 0.6;
        }

        /* This is a class for the links formed by the element boxes: */

        a.elementlink {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 0px 14px 1px;
        	text-align: center;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        div.elementnumber {
        	position: absolute;
        	top: 1px;
        	left: 3px;
        	text-align: left;
        }

        /* For the text of the element title, to the right of the element box: */

        div.elementtitle {
        	position: absolute;
        	top: 35px;
        	width: 100%;
        	text-align: center;
        }

        /* Used for the book-contents-page style leaders on the Contents element of
           the index: */

        ul.leaders {
        	padding: 0;
        	margin-top: 1px;
        	margin-bottom: 0;
        	overflow-x: hidden;
        	list-style: none}
        ul.leaders li.leaded:before {
        	float: left;
        	width: 0;
        	white-space: nowrap;
        	content:
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "}
        ul.leaders li.leaded span:first-child {
        	padding-right: 0.33em;
        }
        ul.leaders li.leaded span + span {
        	float: right;
        	padding-left: 0.33em;
        }
        li.indent1 span:first-child {
        	padding-left: 25px;
        }
        li.indent2 span:first-child {
        	padding-left: 50px;
        }
        li.indent3 span:first-child {
        	padding-left: 75px;
        }
        li.indent4 span:first-child {
        	padding-left: 100px;
        }
        li.indent5 span:first-child {
        	padding-left: 125px;
        }
        li.indent6 span:first-child {
        	padding-left: 150px;
        }
        li.indent7 span:first-child {
        	padding-left: 175px;
        }
        li.indent8 span:first-child {
        	padding-left: 200px;
        }
        li.indent9 span:first-child {
        	padding-left: 225px;
        }

        li.unleaded:before {
        	content: "";
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttons {
        	height: 20px;
        	padding: 2px 8px 2px 8px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 5px;
        }

        span.registryminibuttons {
        	height: 14px;
        	padding: 2px 5px 2px 5px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 4px;
        }

        /* Used to hide or display sections in the Registry pages: */

        div.registrysectionitemsopen {
        	display: block;
        }

        div.registrysectionitemsclosed {
        	display: none;
        }

        /* Hanging indentation for Registry item paragraphs: */

        p.registryitem {
        	padding-left: 80px;
        	text-indent: -40px;
        }

        p.registryaddition {
        	padding-left: 40px;
        	text-indent: -40px;
        }

        -->
    </style>
    <script type="text/javascript">
        function project() {
            return window.Project;
        }
        function showExtra(id, imid) {
        	if (document.getElementById(id).style.display == 'block') {
        		document.getElementById(id).style.display = 'none';
        		document.getElementById(imid).src = 'inform:/extra.png';
        	} else {
        		document.getElementById(id).style.display = 'block';
        		document.getElementById(imid).src = 'inform:/extraclose.png';
        	}
        }
        function openExtra(id, imid) {
        	document.getElementById(id).style.display = 'block';
        	document.getElementById(imid).src = 'inform:/extraclose.png';
        }
        function closeExtra(id, imid) {
        	document.getElementById(id).style.display = 'none';
        	document.getElementById(imid).src = 'inform:/extra.png';
        }
        function pasteCode(code) {
            var myProject = project();

            myProject.selectView('source');
            myProject.pasteCode(code);
        }

    </script>
</head>
<body>
    <!--CONTENT BEGINS-->
    <table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><a href="inform://Extensions/Extensions.html" border=0><img border=0 src="inform:/doc_images/Hookindex.png" border=0></a></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0><font color="#FFFFFF" size=2>Extensions</font></a></td><TD width=56px height=26px align="right" valign="center"><a href="inform:/index.html" border=0><img border=0 src="inform:/doc_images/Hookup.png" border=0></a></td></tr></table>

    <p><a href="javascript:pasteCode('Include JSON by Dannii Willis.[=0x000A=][=0x000A=][=0x000A=]')"><img border=0 src=inform:/doc_images/paste.png></a>&nbsp;<b>JSON<span class="extensionindexentry"> by </span>Dannii Willis</b></p>
    <p><span class="smaller">(For Glulx Only)&nbsp; <img border=0 src=inform:/doc_images/vm_glulx.png>&nbsp;Version 1.0.220301</span></p>
    <p>Provides support for parsing and generating JSON</p>
    <p></p>
    <hr>
    <p><span class="indexblack"><b><a style="text-decoration: none" href=#docsec1>Chapter 1: </a></b></span>Creating JSON references<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec2>Chapter 2: </a></b></span>Reading and setting JSON references<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec3>Chapter 3: </a></b></span>JSON objects<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec4>Chapter 4: </a></b></span>Parsing and stringifying JSON<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec5>Chapter 5: </a></b></span>Cleaning up<br>
    <br>
    <b>Examples</b><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="JSON-eg1.html#eg1">A &mdash; Actions tracker</p>

    <p><blockquote><span class="indexdullblue"><a href="javascript:pasteCode('[=0x0022=]Actions tracker[=0x0022=][=0x000A=][=0x000A=]Include JSON by Dannii Willis.[=0x000A=][=0x000A=]The Lab is a room.[=0x000A=]In the lab is a coin.[=0x000A=][=0x000A=]The File of Tracked Actions is called [=0x0022=]actions[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Tracked Actions exists:[=0x000A=][=0x0009=][=0x0009=]let text data be [=0x0022=][text of File of Tracked Actions][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]let json data be parse text data;[=0x000A=][=0x0009=][=0x0009=]if json data has key [=0x0022=]restarted[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have restarted this demo.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have not yet restarted this demo.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if json data has key [=0x0022=]jumped[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let jump count be get key [=0x0022=]jumped[=0x0022=] of json data;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have jumped [jump count as a number] times.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if json data has key [=0x0022=]picked up coin[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let pick up coint count be get key [=0x0022=]picked up coin[=0x0022=] of json data;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have picked up the coin [pick up coint count as a number] times.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]destroy json data;[=0x000A=][=0x000A=]First carry out restarting the game rule:[=0x000A=][=0x0009=]let json data be a JSON reference;[=0x000A=][=0x0009=]if the File of Tracked Actions exists:[=0x000A=][=0x0009=][=0x0009=]let text data be [=0x0022=][text of File of Tracked Actions][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]let json data be parse text data;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]let json data be a new JSON object;[=0x000A=][=0x0009=]set key [=0x0022=]restarted[=0x0022=] of json data to JSON true;[=0x000A=][=0x0009=]write [=0x0022=][json data][=0x0022=] to File of Tracked Actions;[=0x000A=][=0x0009=]destroy json data;[=0x000A=][=0x000A=]To increment (T[=0x000A=][=0x000A=]')"><img border=0 src=inform:/doc_images/paste.png></a> &quot;Actions tracker&quot;</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Include JSON by Dannii Willis.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> The Lab is a room.<br>
     In the lab is a coin.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> The File of Tracked Actions is called &quot;actions&quot;.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> When play begins:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; if the File of Tracked Actions exists:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let text data be &quot;[text of File of Tracked Actions]&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be parse text data;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if json data has key &quot;restarted&quot;:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have restarted this demo.[line break]&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have not yet restarted this demo.[line break]&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if json data has key &quot;jumped&quot;:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let jump count be get key &quot;jumped&quot; of json data;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have jumped [jump count as a number] times.[line break]&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if json data has key &quot;picked up coin&quot;:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let pick up coint count be get key &quot;picked up coin&quot; of json data;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have picked up the coin [pick up coint count as a number] times.[line break]&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destroy json data;</span></blockquote>

    <p><blockquote><span class="indexdullblue"> First carry out restarting the game rule:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; let json data be a JSON reference;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; if the File of Tracked Actions exists:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let text data be &quot;[text of File of Tracked Actions]&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be parse text data;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be a new JSON object;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; set key &quot;restarted&quot; of json data to JSON true;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; write &quot;[json data]&quot; to File of Tracked Actions;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; destroy json data;</span></blockquote>

    <p><blockquote><span class="indexdullblue"> To increment (T</a></span><br>
    </p>
    <hr>
    <p></p>
    </p>

    <p> This extension provides support for parsing, processing, and generating JSON.</p>

    <p><p><span class="indexdullred"><b><span id=docsec1>Chapter 1: Creating JSON references</span></b></span></p>
    </p>

    <p> The basic data structure in this extension is the JSON reference. You can create JSON references with these phrases:</p>

    <p><blockquote><span class="indexdullblue"> JSON null<br>
     JSON true<br>
     JSON false/boolean<br>
     JSON number (N - number)<br>
     JSON real number (N - real number)<br>
     JSON string/text from (T - text)<br>
     JSON array<br>
     JSON object</span></blockquote>

    <p> To determine which type a JSON reference has, use the phrase &quot;type of (json reference)&quot;.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec2>Chapter 2: Reading and setting JSON references</span></b></span></p>
    </p>

    <p> You can access the internal data of a JSON reference with these phrases. If you try to access a reference using the wrong type an error will be shown.</p>

    <p><blockquote><span class="indexdullblue"> if (R - JSON reference) as a truth state:<br>
     (R - JSON reference) as a number<br>
     (R - JSON reference) as a real number<br>
     let (T - nonexisting text variable) be (R - JSON reference) as a text/string<br>
     let (L - nonexisting list of JSON references variable) be (R - JSON reference) as a/an list/array</span></blockquote>

    <p> To set a boolean, number, or real number, use these phrases:</p>

    <p><blockquote><span class="indexdullblue"> set (R - JSON reference) to (V - truth state)<br>
     set (R - JSON reference) to (V - number)<br>
     set (R - JSON reference) to (V - real number)</span></blockquote>

    <p> Strings and arrays can be modified in place using the standard Inform phrases. You do not need to update the JSON reference with the new text or list.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec3>Chapter 3: JSON objects</span></b></span></p>
    </p>

    <p> There is no Inform data structure that fits a JSON object, but you can use these phrases to access them:</p>

    <p><blockquote><span class="indexdullblue"> if (R - JSON reference) has key (K - text):<br>
     set key (K - text) of (R - JSON reference) to (V - JSON reference)<br>
     get key (K - text) of (R - JSON reference)<br>
     delete key (K - text) of (R - JSON reference)</span></blockquote>

    <p> You can also repeat through the keys of a JSON object with this phrase:</p>

    <p><blockquote><span class="indexdullblue"> repeat with (loopvar - nonexisting text variable) of/in (R - JSON reference)</span></blockquote>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec4>Chapter 4: Parsing and stringifying JSON</span></b></span></p>
    </p>

    <p> These two phrases will parse a text into a JSON reference, and a JSON reference into a text:</p>

    <p><blockquote><span class="indexdullblue"> parse (T - a text)<br>
     say (R - JSON reference)<br>
     say (R - JSON reference) escaping non-ASCII</span></blockquote>

    <p> You can use the standard Inform phrases &quot;text of (external file)&quot; and &quot;write (text) to (external file)&quot; to read and write JSON files, but note that they will have the. glkdata extension, as well as the normal Inform file header. These file phrases only support ASCII, so use the &quot;escaping non-ASCII&quot; phrase if you have non-ASCII characters.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec5>Chapter 5: Cleaning up</span></b></span></p>
    </p>

    <p> JSON references exist outside the normal Inform model, so you must manually destroy them in order to not leak memory. Destroying an array or object will clean up all of its contents as well.</p>

    <p><blockquote><span class="indexdullblue"> destroy (R - JSON reference)</span></blockquote>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg1><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <a href="JSON.html#eg1" style="text-decoration: none"><div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">A</span></div>
                            </a>
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <a href="JSON.html#eg1" style="text-decoration: none"><img border="0" src='inform:/doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Actions tracker</p>

                <p><blockquote><span class="indexdullblue"><a href="javascript:pasteCode('[=0x0022=]Actions tracker[=0x0022=][=0x000A=][=0x000A=]Include JSON by Dannii Willis.[=0x000A=][=0x000A=]The Lab is a room.[=0x000A=]In the lab is a coin.[=0x000A=][=0x000A=]The File of Tracked Actions is called [=0x0022=]actions[=0x0022=].[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]if the File of Tracked Actions exists:[=0x000A=][=0x0009=][=0x0009=]let text data be [=0x0022=][text of File of Tracked Actions][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]let json data be parse text data;[=0x000A=][=0x0009=][=0x0009=]if json data has key [=0x0022=]restarted[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have restarted this demo.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have not yet restarted this demo.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if json data has key [=0x0022=]jumped[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let jump count be get key [=0x0022=]jumped[=0x0022=] of json data;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have jumped [jump count as a number] times.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]if json data has key [=0x0022=]picked up coin[=0x0022=]:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let pick up coint count be get key [=0x0022=]picked up coin[=0x0022=] of json data;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You have picked up the coin [pick up coint count as a number] times.[line break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]destroy json data;[=0x000A=][=0x000A=]First carry out restarting the game rule:[=0x000A=][=0x0009=]let json data be a JSON reference;[=0x000A=][=0x0009=]if the File of Tracked Actions exists:[=0x000A=][=0x0009=][=0x0009=]let text data be [=0x0022=][text of File of Tracked Actions][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]let json data be parse text data;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]let json data be a new JSON object;[=0x000A=][=0x0009=]set key [=0x0022=]restarted[=0x0022=] of json data to JSON true;[=0x000A=][=0x0009=]write [=0x0022=][json data][=0x0022=] to File of Tracked Actions;[=0x000A=][=0x0009=]destroy json data;[=0x000A=][=0x000A=]To increment (T[=0x000A=][=0x000A=]')"><img border=0 src=inform:/doc_images/paste.png></a> &quot;Actions tracker&quot;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Include JSON by Dannii Willis.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> The Lab is a room.<br>
                 In the lab is a coin.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> The File of Tracked Actions is called &quot;actions&quot;.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> When play begins:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; if the File of Tracked Actions exists:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let text data be &quot;[text of File of Tracked Actions]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be parse text data;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if json data has key &quot;restarted&quot;:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have restarted this demo.[line break]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have not yet restarted this demo.[line break]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if json data has key &quot;jumped&quot;:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let jump count be get key &quot;jumped&quot; of json data;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have jumped [jump count as a number] times.[line break]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if json data has key &quot;picked up coin&quot;:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let pick up coint count be get key &quot;picked up coin&quot; of json data;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have picked up the coin [pick up coint count as a number] times.[line break]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destroy json data;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> First carry out restarting the game rule:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; let json data be a JSON reference;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; if the File of Tracked Actions exists:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let text data be &quot;[text of File of Tracked Actions]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be parse text data;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be a new JSON object;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; set key &quot;restarted&quot; of json data to JSON true;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; write &quot;[json data]&quot; to File of Tracked Actions;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; destroy json data;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> To increment (T</span></b></a><br>
                <p>a text) in tracked actions:<blockquote><span class="indexdullblue">&nbsp;&nbsp;&nbsp;&nbsp; let json data be a JSON reference;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; if the File of Tracked Actions exists:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let text data be &quot;[text of File of Tracked Actions]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be parse text data;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; let json data be a new JSON object;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; let count be 0;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; if json data has key T:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now count is get key T of json data as a number;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; increment count;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; set key T of json data to JSON number count;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; write &quot;[json data]&quot; to File of Tracked Actions;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; destroy json data;</p>

            </td>
        </tr>
    </table>
    <table border="0" cellspacing="0" cellpadding="0" class="extensionexample" width=100%>
        <tr>
            <td align="left" valign="top">
                <p></p>

                <p><blockquote><span class="indexdullblue"> Carry out jumping:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; increment &quot;jumped&quot; in tracked actions;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> After taking the coin:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; increment &quot;picked up coin&quot; in tracked actions;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; continue the action;</span></blockquote>

                <p></p>

            </td>
        </tr>
    </table>
    </p>

    <p>
    <!--CONTENT ENDS-->
</body>
</html>
